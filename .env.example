# =============================================================================
# Example Environment Configuration for Development
# =============================================================================
# Copy this file to .env and customize the values for your local setup:
#   cp .env.example .env
#
# IMPORTANT: Never commit the .env file to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# PostgreSQL database connection settings (requires pgvector extension)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=classifier_extractor_dev
POSTGRES_USER=your_db_user
POSTGRES_PASSWORD=your_db_password

# -----------------------------------------------------------------------------
# Storage Backend Configuration
# -----------------------------------------------------------------------------
# Storage backend type: 'local' or 's3'
# - local: Files stored on local filesystem
# - s3: Files stored in S3-compatible storage (AWS S3, MinIO, DigitalOcean, etc.)
STORAGE_BACKEND=local

# Local filesystem storage path (used when STORAGE_BACKEND=local)
# This directory will store uploaded documents and generated PDFs
DOCUMENT_STORAGE=/home/telendry/temp/pdf_files/

# -----------------------------------------------------------------------------
# S3/MinIO Configuration (only needed if STORAGE_BACKEND=s3)
# -----------------------------------------------------------------------------
# Uncomment and configure these if using S3-compatible storage

# S3 endpoint URL
# - For AWS S3: leave empty or use https://s3.amazonaws.com
# - For MinIO: http://localhost:9000
# - For DigitalOcean Spaces: https://nyc3.digitaloceanspaces.com
# S3_ENDPOINT=http://localhost:9000

# S3 bucket name
# S3_BUCKET=documents

# S3 access credentials
# S3_ACCESS_KEY=minioadmin
# S3_SECRET_KEY=minioadmin

# S3 region (optional, defaults to us-east-1)
# S3_REGION=us-east-1

# Base prefix for all stored files in the bucket (optional)
# Useful for environment separation (e.g., "production", "staging", "dev")
# Files will be stored as: base_prefix/account_id/path/to/file
# Without base_prefix, files are stored as: account_id/path/to/file
# Note: Account ID is ALWAYS the first component after base_prefix for multi-tenancy isolation
# S3_BASE_PREFIX=dev/

# Local temp directory for S3 operations
# External tools need local file access, so S3 files are downloaded here temporarily
# S3_TEMP_DIR=/tmp/s3_cache

# -----------------------------------------------------------------------------
# LLM Provider Configuration
# -----------------------------------------------------------------------------
# Configure at least one LLM provider (OpenAI or Anthropic)

# OpenAI API Configuration
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=your_openai_api_key_here

# Anthropic API Configuration
# Get your API key from: https://console.anthropic.com/
# ANTHROPIC_API_KEY=your_anthropic_api_key_here

# -----------------------------------------------------------------------------
# Embedding Model Configuration
# -----------------------------------------------------------------------------
# Vector embedding backend: 'openai' or 'sentence-transformers'
# - openai: Uses OpenAI's text-embedding-3-small model (requires OPENAI_API_KEY)
# - sentence-transformers: Uses local all-MiniLM-L6-v2 model (no API key needed)
EMBEDDING_BACKEND=sentence-transformers

# OpenAI embedding model (only used if EMBEDDING_BACKEND=openai)
# OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# -----------------------------------------------------------------------------
# Application Configuration
# -----------------------------------------------------------------------------
# Application host and port
HOST=0.0.0.0
PORT=8000

# Environment mode
# Options: development, production
ENVIRONMENT=development

# Enable debug mode (provides detailed error messages)
DEBUG=true

# -----------------------------------------------------------------------------
# External Tools
# -----------------------------------------------------------------------------
# These tools are used for document conversion and processing
# Ensure they are installed and available in your PATH:
#   - pdftotext (from poppler-utils)
#   - libreoffice (for DOCX conversion)
#   - pandoc (for Markdown and other formats)

# -----------------------------------------------------------------------------
# Development Notes
# -----------------------------------------------------------------------------
# 1. Start with local storage for development (STORAGE_BACKEND=local)
# 2. Create the DOCUMENT_STORAGE directory if it doesn't exist:
#      mkdir -p /home/telendry/temp/pdf_files/
# 3. Install Python dependencies:
#      pip install -r requirements.txt
# 4. Set up PostgreSQL database with pgvector extension
# 5. Run database migrations to create tables and vector indexes:
#      psql -U your_db_user -d classifier_extractor_dev -f migrations/001_add_pgvector_support.sql
#    (The application will auto-create basic tables, but the vector index must be created via SQL)
# 6. Start the development server:
#      uvicorn api.main:app --reload
#
# For testing S3 integration, you can run MinIO locally:
#   docker run -p 9000:9000 -p 9001:9001 \
#     -e "MINIO_ROOT_USER=minioadmin" \
#     -e "MINIO_ROOT_PASSWORD=minioadmin" \
#     quay.io/minio/minio server /data --console-address ":9001"